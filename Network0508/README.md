# ネットワーク 2015/5/8

## URI

### 具体的に何をするためのもの？
URIとは、統一されたルールでweb上のリソースを識別するための文字列である。

### 構成要素
URIは以下の要素で構成される

* スキーム
* ユーザ情報
* ホスト名
* ポート番号
* パス
* クエリパラメータ
* URIフラグメント
* 区切り文字

例）

	http://araki:pass@furyu.jp:8080/entries/1?q=hoge&debug=true#n10

* スキーム http プロトコルを一般に示す
* ユーザ情報 araki:pass（ユーザ名:パスワード）
* ホスト名 furyu.jp 名前解決できるドメイン、またはIPアドレス
* ポート番号 :8080
* パス /entries/1
* クエリパラメータ q=hoge&debug=true
* URIフラグメント #n10
* 区切り文字 :// @ ?

### URLとの違い
URIはURLとURNの総称である。URLはリソースの場所を識別するためのものであり、前節の例はURLである。URNはリソースの名前を識別するためのものであり、書籍のISBNなども含まれる。
URLもURNも識別するためのものなので、URIといえる。

## HTTP
HTTPとはTCP/IPベースのプロトコルである。

### 何のためのプロトコル？
クライアントとサーバ間でHTMLなどのコンテンツの送受信を行うためのプロトコル。

### HTTPメッセージの構成要素
HTTPメッセージにはリクエストとレスポンスがある。
クライアントのリクエストは、以下で構成される。

* スタートライン：リクエストライン。メソッドとリソースパス（相対or絶対）、プロトコルバージョンを書く。
* ヘッダ：ヘッダ情報
* 空行：空の行

サーバからのレスポンスは、以下で構成される。

* スタートライン：ステータスライン。プロトコルのバージョンやステータスコード、テキストフレーズを返す。
* ヘッダ：ヘッダ情報
* 空行：空の行
* ボディ：HTMLなどのコンテンツ

### HTTPの特徴
HTTPの特徴はクライアントとサーバがステートレスなやり取りをすることである。
ステートレスとは、サーバがアプリケーション状態（ユーザの状態）を保存しないということである。

ステートレスなことによる利点は、

* 同じリクエストに対してどのサーバも一意なレスポンスを返すので、ユーザが同じサーバと常に接続する必要がない。
* サーバの拡張がしやすい。

欠点は、

* データのやり取りが冗長。
* 通信エラーに対する対処が必要。

## HTTPステータスコード

### 1xx 情報
接続に関する情報を表す。
100継続、101プロトコル切り替え、102処理中

### 2xx 成功
リクエストを受理したことを表す。
200 OK、201作成、202受理、など。

### 3xx リダイレクション
追加で処理が必要なことを表す。
300複数の選択、301恒久的移動、305プロキシの使用、など。

### 4xx クライアントエラー
クライアント側でミスしていることを表す。
400 BadRequest、403 Forbidden、404 NotFound、など。

### 5xx サーバエラー
サーバ側でエラーが発生したことを表す。
500 InternalServerErrorなど。
