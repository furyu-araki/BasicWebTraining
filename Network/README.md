# ネットワーク

## IPアドレスと名前解決

### ローカルサーバーの起動と動作確認

	sudo apachectl start

でapacheを起動し、ブラウザでlocalhostまたは127.0.0.1にアクセス。

### 山根君のwebサーバーにアクセス
山根君からローカルネットワーク内のIPアドレスを聞き、ブラウザでそのIPを打ち込むと、山根君のapacheサーバーに接続できる。

	ping <山根君のIP>

でも同様に接続が確認できた。

### pingコマンドについて
上記のpingコマンドの実行結果は、以下のようになった。

	64 bytes from 192.168.1.108: icmp_seq=0 ttl=64 time=62.310 ms
	64 bytes from 192.168.1.108: icmp_seq=1 ttl=64 time=81.242 ms
	64 bytes from 192.168.1.108: icmp_seq=2 ttl=64 time=105.183 ms
	64 bytes from 192.168.1.108: icmp_seq=3 ttl=64 time=21.572 ms
	64 bytes from 192.168.1.108: icmp_seq=4 ttl=64 time=40.476 ms

64bytesは送信したパケットサイズ、192.168.1.108は山根君のIPアドレス、ttlはあと何回ルーターを辿れるか、timeは送受信にかかった時間。

また、

	ping github.com

の実行結果は、以下のようになった。

	64 bytes from 192.30.252.130: icmp_seq=0 ttl=50 time=175.955 ms
	64 bytes from 192.30.252.130: icmp_seq=1 ttl=50 time=178.557 ms
	64 bytes from 192.30.252.130: icmp_seq=2 ttl=50 time=187.590 ms
	64 bytes from 192.30.252.130: icmp_seq=3 ttl=50 time=178.790 ms
	64 bytes from 192.30.252.130: icmp_seq=4 ttl=50 time=175.997 ms

ttlが50に減り、timeが100ms程度長くなっていることから、幾つかのルータをたどって時間がかかったことがわかる。

### 名前解決とDNS
山根君のPCに対して、IPアドレスではなくPCのホスト名でpingコマンドを打っても、接続が確認された。
これは、DNS(Domain Name System)がPCの名前とIPアドレスを結びつけているから成り立つことである。
自分のPCのネットワーク設定を確認すると、DNSサーバは192.168.1.1となっていた。おそらくルータがDNSの役割をしていると考えられる。


## ファイアウォール
ファイアウォールについて調べたところ、

* パケットフィルタリング＋NAT 型
* プロキシ型

2種類のファイアウォールについて知った。

### パケットフィルタリング＋NAT 型

#### パケットフィルタリング
パケットフィルタリングとは、パケットに含まれるヘッダ部分を検査することによって、不正な通信を防ぐ仕組みである。パケットヘッダには、

* プロトコル(http, https, ftpなど)
* 送信元アドレス
* 送信先アドレス
* ポート番号

が含まれている。プロトコルは通信手順を定めたもの、ポート番号は通信先のプログラムを指す番号。

#### NAT
送信元のアドレスを書き換えることで、クライアントに実際のサーバとは違うものと通信しているように見せる。


### プロキシ型
他のサーバに代理でパケット送信させることで、NATと同じことを達成できる。


## 課題の実施

### 課題の内容
山根君のPC間とのhttp通信において、以下の五つの動作を試した。

1. IPアドレスを変更、または存在しないIPを指定
2. ポート番号を10001に変更する
3. Webサーバを停止させる
4. 存在しないHTMLファイルを指定する
5. wifiをoffにする

### 実施した結果

#### 1. IPアドレスを変更、または存在しないIPを指定
「ページを開けません」と表示された。ホストが存在しないからだと思われる。

#### 2. ポート番号を10001に変更する
「サーバに接続できない」と表示された。ホストはあるが、ポートが違う。
アプリケーションがないから？それとも、ファイアウォールで弾かれている？

#### 3. Webサーバを停止させる
「サーバに接続できない」と表示された。HTTPサーバが動いてないので、HTTP接続ができない。ちなみに、pingはできた。

#### 4. 存在しないHTMLファイルを指定する
「Not Found」と表示された。サーバにはリクエストを送信できたが、ファイルがなかったのでサーバがエラーメッセージを返しているものと思われる。

#### 5. wifiをoffにする
「ページを開けません」と表示された。pingも無理だった。ローカルネットワークに接続していないので、つながる経路が無い。
